var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class i{constructor(t){e(this,"canvas"),e(this,"ctx"),e(this,"animationFrameId",null);const i=document.getElementById(t);if(!i)throw new Error(`Canvas with id "${t}" not found`);this.canvas=i;const s=i.getContext("2d");if(!s)throw new Error("Could not get 2D rendering context");this.ctx=s}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}init(){this.resize(),window.addEventListener("resize",()=>this.resize()),this.animate()}animate(){const t=this.ctx.createImageData(this.canvas.width,this.canvas.height),e=t.data;for(let i=0;i<e.length;i+=4){const t=255*Math.random();e[i]=t,e[i+1]=t,e[i+2]=t,e[i+3]=30}this.ctx.putImageData(t,0,0),setTimeout(()=>{this.animationFrameId=requestAnimationFrame(()=>this.animate())},100)}destroy(){null!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}}class s{constructor(t){e(this,"line"),this.line=document.getElementById(t)}init(){this.line&&setTimeout(()=>{this.line&&this.line.classList.add("fade-in")},500)}}const a=new Date("2023-10-29T00:00:00"),n={miss:"When you miss me, remember that distance is just a number. I'm thinking of you, I'm here for you, and I'm counting down every moment until we're together again. You're never alone, my love.",reminder:"You are so much more than you know. Your worth isn't measured by what you achieve or what others think. It's in your kindness, your laughter, your dreams, and the way you make the world brighter just by being in it. You matter, endlessly.",sad:"It's okay to feel down sometimes. These moments don't define you. You're strong, resilient, and beautiful even on your hardest days. I'm here with you through all of it. Let's breathe through this together.",doubt:"When you doubt yourself, I want you to remember: You've overcome so much. You've grown in ways you might not even see. Trust yourself. Trust your journey. I believe in you, always.",love:"You are loved beyond words. Loved for who you are, in all your perfect imperfections. Loved in your quiet moments and your loud laughter. Loved today, tomorrow, and every day after. Feel this love, let it wrap around you like a warm embrace."},o=256,r=.8;class l{constructor(t,i,s,a){e(this,"daysElement"),e(this,"hoursElement"),e(this,"minutesElement"),e(this,"intervalId",null),e(this,"secondsElement");const n=document.getElementById(t),o=document.getElementById(i),r=document.getElementById(s),l=document.getElementById(a);if(!(n&&o&&r&&l))throw new Error("Counter elements not found");this.daysElement=n,this.hoursElement=o,this.minutesElement=r,this.secondsElement=l}calculateTimeDiff(){const t=(new Date).getTime()-a.getTime();return{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3)}}update(){const{days:t,hours:e,minutes:i,seconds:s}=this.calculateTimeDiff();this.daysElement.textContent=t.toString(),this.hoursElement.textContent=e.toString(),this.minutesElement.textContent=i.toString(),this.secondsElement.textContent=s.toString()}start(){this.update(),this.intervalId=window.setInterval(()=>this.update(),1e3)}stop(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}}class h{constructor(){e(this,"observer");this.observer=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -100px 0px"})}init(){document.querySelectorAll(".section-title, .bento-grid, .vault-container, .footer").forEach(t=>{this.observer.observe(t)}),document.querySelectorAll(".timeline-item").forEach(t=>{this.observer.observe(t)})}destroy(){this.observer.disconnect()}}class d{constructor(){e(this,"rafId",null),e(this,"isScrolling",!1)}init(){window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0})}handleScroll(){this.isScrolling||null!==this.rafId||(this.rafId=window.requestAnimationFrame(()=>{const t=window.pageYOffset;document.querySelectorAll("section").forEach((e,i)=>{const s=e.getBoundingClientRect();if(s.top<window.innerHeight&&s.bottom>0){const s=t*.2*(i%2==0?1:-1)*.1;e.style.transform=`translate3d(0, ${s}px, 0)`}}),this.rafId=null,this.isScrolling=!1}),this.isScrolling=!0)}}class u{constructor(){e(this,"overlay"),e(this,"modalBody"),e(this,"closeBtn"),e(this,"buttons");const t=document.getElementById("modalOverlay"),i=document.getElementById("modalBody"),s=document.getElementById("modalClose"),a=document.querySelectorAll(".vault-button");if(!t||!i||!s)throw new Error("Vault modal elements not found");this.overlay=t,this.modalBody=i,this.closeBtn=s,this.buttons=a}init(){this.buttons.forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-vault");e&&e in n?this.showModal(n[e]):this.showModal("I love you more than words can express.")})}),this.closeBtn.addEventListener("click",()=>this.closeModal()),this.overlay.addEventListener("click",t=>{t.target===this.overlay&&this.closeModal()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&this.overlay.classList.contains("active")&&this.closeModal()})}showModal(t){this.modalBody.textContent=t,this.overlay.classList.add("active"),document.body.style.overflow="hidden"}closeModal(){this.overlay.classList.remove("active"),document.body.style.overflow=""}}class c{constructor(t,i,s){e(this,"audio"),e(this,"playBtn"),e(this,"state"),e(this,"visualizerCanvas"),e(this,"visualizerCtx",null),e(this,"isInitialized",!1);const a=document.getElementById(t),n=document.getElementById(i);if(!a||!n)throw new Error("Audio or play button element not found");this.audio=a,this.playBtn=n,this.visualizerCanvas=document.getElementById(s),this.visualizerCanvas&&(this.visualizerCtx=this.visualizerCanvas.getContext("2d")),this.state={isPlaying:!1,audioContext:null,analyser:null,dataArray:null,animationFrame:null},this.setupEventListeners()}setupEventListeners(){this.audio.addEventListener("error",t=>{if(this.audio.error){const t=this.playBtn.querySelector(".btn-label");t&&(t.textContent="File not found"),this.playBtn.style.opacity="0.5",this.playBtn.style.cursor="not-allowed"}}),this.audio.addEventListener("canplaythrough",()=>{}),this.playBtn.addEventListener("click",()=>this.togglePlayback()),this.audio.addEventListener("ended",()=>{this.state.isPlaying=!1,this.playBtn.classList.remove("playing"),this.stopVisualizer()})}async togglePlayback(){this.state.isPlaying?this.pause():await this.play()}async play(){var t;try{this.isInitialized||await this.initializeAudioContext(),"suspended"===(null==(t=this.state.audioContext)?void 0:t.state)&&await this.state.audioContext.resume(),await this.audio.play(),this.state.isPlaying=!0,this.playBtn.classList.add("playing"),this.startVisualizer()}catch(e){alert('Unable to play audio. Please check:\n1. The "apocalypse.mp3" file is in the public folder\n2. Your browser allows audio playback\n3. The file format is supported (MP3)')}}pause(){this.audio.pause(),this.state.isPlaying=!1,this.playBtn.classList.remove("playing"),this.stopVisualizer()}async initializeAudioContext(){const t=window.AudioContext||window.webkitAudioContext;this.state.audioContext=new t,this.state.analyser=this.state.audioContext.createAnalyser(),this.state.analyser.fftSize=o,this.state.analyser.smoothingTimeConstant=r;this.state.audioContext.createMediaElementSource(this.audio).connect(this.state.analyser),this.state.analyser.connect(this.state.audioContext.destination),this.state.dataArray=new Uint8Array(this.state.analyser.frequencyBinCount),this.isInitialized=!0}resizeVisualizerCanvas(){this.visualizerCanvas&&(this.visualizerCanvas.width=window.innerWidth,this.visualizerCanvas.height=150)}startVisualizer(){if(!(this.visualizerCanvas&&this.visualizerCtx&&this.state.analyser&&this.state.dataArray))return;this.resizeVisualizerCanvas(),window.addEventListener("resize",()=>this.resizeVisualizerCanvas());const t=()=>{if(!(this.state.analyser&&this.state.dataArray&&this.visualizerCtx&&this.visualizerCanvas))return;this.state.analyser.getByteFrequencyData(new Uint8Array(this.state.dataArray)),this.visualizerCtx.fillStyle="#050505",this.visualizerCtx.fillRect(0,0,this.visualizerCanvas.width,this.visualizerCanvas.height);const e=this.visualizerCanvas.width/this.state.dataArray.length*2;let i=0;this.visualizerCtx.strokeStyle="rgba(168, 168, 160, 0.6)",this.visualizerCtx.lineWidth=2,this.visualizerCtx.beginPath();for(let t=0;t<this.state.dataArray.length;t++){const s=this.state.dataArray[t]/255*this.visualizerCanvas.height*.5,a=this.visualizerCanvas.height/2-s;0===t?this.visualizerCtx.moveTo(i,a):this.visualizerCtx.lineTo(i,a),i+=e}i=0;for(let t=0;t<this.state.dataArray.length;t++){const s=this.state.dataArray[t]/255*this.visualizerCanvas.height*.5,a=this.visualizerCanvas.height/2+s;this.visualizerCtx.lineTo(i,a),i+=e}this.visualizerCtx.closePath(),this.visualizerCtx.stroke(),this.visualizerCtx.globalAlpha=.3,this.visualizerCtx.fillStyle="rgba(168, 168, 160, 0.2)",this.visualizerCtx.fill(),this.visualizerCtx.globalAlpha=1,this.state.isPlaying&&(this.state.animationFrame=requestAnimationFrame(t))};t()}stopVisualizer(){null!==this.state.animationFrame&&(cancelAnimationFrame(this.state.animationFrame),this.state.animationFrame=null)}}class m{constructor(){e(this,"grainRenderer"),e(this,"greetingAnimation"),e(this,"loveCounter"),e(this,"scrollAnimations"),e(this,"parallaxEffect"),e(this,"vaultModal"),e(this,"audioPlayer");try{this.grainRenderer=new i("grain-canvas"),this.greetingAnimation=new s("greetingLine2"),this.loveCounter=new l("days","hours","minutes","seconds"),this.scrollAnimations=new h,this.parallaxEffect=new d,this.vaultModal=new u,this.audioPlayer=new c("audio","playBtn","visualizer-canvas")}catch(t){}}init(){this.grainRenderer.init(),this.greetingAnimation.init(),this.loveCounter.start(),this.scrollAnimations.init(),this.parallaxEffect.init(),this.vaultModal.init(),setTimeout(()=>{const t=document.querySelector(".section-title");t&&window.scrollY>100&&t.classList.add("visible")},500)}destroy(){this.grainRenderer.destroy(),this.loveCounter.stop(),this.scrollAnimations.destroy()}}document.addEventListener("DOMContentLoaded",()=>{const t=new m;t.init(),window.addEventListener("beforeunload",()=>{t.destroy()})});
